# Spark-DSG Layer Key Migration Utility (`dsg_migrator`)

A C++ command-line utility to correct non-standard layer keys within a `spark-dsg` (`.dsg`) scene graph file.

## The Problem

Code that uses the standard `spark_dsg::DsgLayers` enums (e.g., for `MESH_PLACES`) may fail to find the expected layer when loading certain `.dsg` files. This happens when the scene graph file was generated by a system that used a different or outdated convention for its layer keys.

For example, your code may expect the `MESH_PLACES` layer to be at **Layer ID 3, Partition 1**, but the loaded file has this data stored under a non-standard **Layer ID 20, Partition 0**. This data inconsistency breaks code that relies on the standard library enums and can be difficult to debug in an automated pipeline.

## The Solution

The `dsg_migrator` utility provides a permanent solution by performing a data migration. It reads an entire "broken" scene graph, copies all of its data (nodes, edges, mesh, etc.) to a new graph in memory, and intelligently remaps the nodes from the incorrect layer key to the correct, standard one.

It then saves this corrected graph to a new `.dsg` file. The resulting file is fully compatible with the standard `DsgLayers` enums and can be used directly in Python or C++ without any workarounds.

## Useage

```    
./dsg_migrator <input-filepath> <output-filepath>
```
  
